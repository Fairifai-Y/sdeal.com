# Apache Configuration for sdeal.com/adwords-tool
# Place this in your Apache virtual host configuration for sdeal.com

# Enable required modules
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule headers_module modules/mod_headers.so

# Virtual Host for sdeal.com
<VirtualHost *:80>
    ServerName sdeal.com
    ServerAlias www.sdeal.com
    
    # Main site (your existing SDeal React app)
    DocumentRoot /var/www/sdeal.com/public
    
    # AdWords Tool - Proxy to local Flask app
    <Location "/adwords-tool">
        ProxyPass http://127.0.0.1:8080/
        ProxyPassReverse http://127.0.0.1:8080/
        
        # Headers for proper routing
        RequestHeader set X-Forwarded-Prefix /adwords-tool
        RequestHeader set X-Forwarded-Proto http
        RequestHeader set X-Forwarded-Host sdeal.com
        
        # Security headers
        Header always set X-Frame-Options DENY
        Header always set X-Content-Type-Options nosniff
        Header always set X-XSS-Protection "1; mode=block"
    </Location>
    
    # Static files for AdWords Tool (if needed)
    Alias /adwords-tool/static /var/www/sdeal.com/adwords-tool/static
    
    # Logs
    ErrorLog ${APACHE_LOG_DIR}/sdeal_error.log
    CustomLog ${APACHE_LOG_DIR}/sdeal_access.log combined
</VirtualHost>

# HTTPS version (recommended for production)
<VirtualHost *:443>
    ServerName sdeal.com
    ServerAlias www.sdeal.com
    
    # SSL Configuration
    SSLEngine on
    SSLCertificateFile /path/to/your/ssl/certificate.crt
    SSLCertificateKeyFile /path/to/your/ssl/private.key
    
    # Main site
    DocumentRoot /var/www/sdeal.com/public
    
    # AdWords Tool - Proxy to local Flask app
    <Location "/adwords-tool">
        ProxyPass http://127.0.0.1:8080/
        ProxyPassReverse http://127.0.0.1:8080/
        
        # Headers for proper routing
        RequestHeader set X-Forwarded-Prefix /adwords-tool
        RequestHeader set X-Forwarded-Proto https
        RequestHeader set X-Forwarded-Host sdeal.com
        
        # Security headers
        Header always set X-Frame-Options DENY
        Header always set X-Content-Type-Options nosniff
        Header always set X-XSS-Protection "1; mode=block"
        Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
    </Location>
    
    # Logs
    ErrorLog ${APACHE_LOG_DIR}/sdeal_ssl_error.log
    CustomLog ${APACHE_LOG_DIR}/sdeal_ssl_access.log combined
</VirtualHost>
